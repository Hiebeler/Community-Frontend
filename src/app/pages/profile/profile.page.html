<ion-content>
  <div class="container" style="padding-top: 15px">
    <ion-grid *ngIf="user">
      <ion-row *ngIf="!editingImage">
        <ion-col style="display: flex; justify-content: center">
          <img class="profileimage" [src]="user.profileimage" alt="" height="100" width="100" (click)="editImage(true)">
        </ion-col>
      </ion-row>

      <ion-row *ngIf="editingImage" class="editing-image-row ion-padding">

        <ion-col size="6" style="display: flex; justify-content: center">
          <button type="button" class="btn-small btn-dark" style="width: 100%;" (click)="editImage(false)">Schlie√üen</button>
        </ion-col>

        <ion-col size="6" style="display: flex; justify-content: center">
          <button *ngIf="cropImgPreview" type="button" class="btn-small btn-primary" style="width: 100%;" (click)="saveImage()">Speichern</button>
          <button *ngIf="!cropImgPreview" type="button" class="btn-small btn-disabled" style="width: 100%;">Speichern</button>
        </ion-col>

        <ion-col size="12">
          <input type="file" (change)="onFileChange($event)" />
        </ion-col>

        <ion-col size="12">
          <image-cropper [imageChangedEvent]="imgChangeEvt" [maintainAspectRatio]="true" [aspectRatio]="4 / 4"
            [resizeToWidth]="256" format="jpeg" (imageCropped)="cropImg($event)" (imageLoaded)="imgLoad()"
            (cropperReady)="initCropper()" (loadImageFailed)="imgFailed()" [roundCropper]="true">
          </image-cropper>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col style="display: flex; justify-content: center">
          <p>{{user.firstname + ' ' + user.lastname}}</p>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col style="display: flex; justify-content: center">
          <p *ngIf="!user.communityId">Noch keiner Community beigetreten</p>
          <p *ngIf="community">
            <span *ngIf="user.id === community.adminId">Admin</span>
            <span *ngIf="user.id !== community.adminId">Mitglied</span>
            in Community "{{community.name}}"
          </p>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col style="display: flex; justify-content: center">
          <button type="button" class="btn-small btn-primary"(click)="logout()">Ausloggen</button>
        </ion-col>
      </ion-row>
      <ion-row *ngIf="requests">
        <ion-col *ngFor="let request of requests">
          <h1>Requests:</h1>
          <ion-grid class="requests-wrapper">
            <ion-row>
              <ion-col>
                <h1 class="ion-text-center">{{request.user.firstname}}</h1>
              </ion-col>
            </ion-row>

            <ion-row>
              <ion-col>
                <button type="button" class="btn-small btn-primary" (click)="accept(request.id)">Annehmen</button>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>
</ion-content>
