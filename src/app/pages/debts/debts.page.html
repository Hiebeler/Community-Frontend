<ion-content>
  <ion-refresher slot="fixed" (ionRefresh)="getItems($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <div class="container">
    <ion-grid fixed="true">
      <ion-row class="topbar">
        <ion-col class="topbar-header-col">
          <p>Schulden</p>
        </ion-col>
        <ion-col size="auto" class="topbar-buttons-col">
          <button type="button" class="btn-small btn-primary" (click)="openEditor(true)">Neu</button>
        </ion-col>
      </ion-row>

      <ion-row *ngIf="editorIsOpen">
        <ion-col>
          <form [formGroup]="itemEditorForm" (ngSubmit)="saveDebt()">
            <ion-grid class="card">
              <ion-row>
                <ion-col style="display: flex; justify-content: center">
                  <button type="button" class="btn-small btn-dark" style="width: 100%;"
                    (click)="openEditor(false)">Schließen</button>
                </ion-col>
                <ion-col>
                  <button [disabled]="itemEditorForm.invalid" type="button" (click)="saveDebt()"
                    class="btn-large btn-primary" style="width: 100%;">Speichern</button>
                </ion-col>
              </ion-row>

              <ion-row>
                <ion-col>
                  <p>Schuldner:</p>
                  <div class="field-box">
                    <select name="cars" id="cars" formControlName="debitor">
                      <option *ngFor="let user of usersInCommunity" value="volvo">{{user.firstname + ' ' +
                        user.lastname}}</option>
                    </select>
                  </div>
                </ion-col>
              </ion-row>

              <ion-row>
                <ion-col>
                  <p>Euro:</p>
                  <div class="field-box">
                    <input type="number" id="name" autocomplete="off" formControlName="amount" placeholder="Name">
                  </div>
                </ion-col>
              </ion-row>

              <ion-row>
                <ion-col>
                  <p>Grund:</p>
                  <div class="field-box">
                    <input type="text" id="name" autocomplete="off" formControlName="name" placeholder="Name">
                  </div>
                </ion-col>
              </ion-row>
            </ion-grid>
          </form>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col>
          <h2>Noch zu Zahlen:</h2>
          <div *ngFor="let balance of balances">
            <ion-row *ngIf="balance.amount > 0">
              <ion-col size="auto">
              </ion-col>
              <ion-col>
                <span>
                  {{balance.debitor.firstname + ' ' + balance.debitor.lastname + ' ' + balance.amount + '€'}}
                </span>
              </ion-col>
            </ion-row>
          </div>
          <h2>Geld kriegen:</h2>
          <div *ngFor="let balance of balances">
            <ion-row *ngIf="balance.amount < 0">
              <ion-col size="auto">
              </ion-col>
              <ion-col>
                <span>
                  {{balance.debitor.firstname + ' ' + balance.debitor.lastname + ' ' + balance.amount * -1 + '€'}}
                </span>
              </ion-col>
            </ion-row>
          </div>
        </ion-col>
      </ion-row>


    </ion-grid>
  </div>
</ion-content>