<ion-content>
  <div class="container">
    <ion-grid>
      <ion-row class="topbar">
        <ion-col size="auto" class="topbar-buttons-col">
          <button type="button" class="btn-small btn-medium" (click)="gotoProfile()">
            <ion-icon style="display: flex; font-size: 1.2rem;" name="return-up-back-outline"></ion-icon>
          </button>
        </ion-col>
        <ion-col class="topbar-header-col">
          <p>Community finden</p>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col>
          <form [formGroup]="searchForm" (ngSubmit)="onSubmit()">
            <div class="field-box">
              <label for="search">Community Code</label>
              <input type="text" id="search" autocomplete="off" formControlName="search" placeholder="123456">
            </div>
            <button [disabled]="searchForm.invalid || loading" type="submit"
              class="btn-large btn-primary">Suchen</button>
          </form>
        </ion-col>
      </ion-row>

      <ion-row *ngIf="loading">
        <ion-col>
          <ion-spinner name="crescent"></ion-spinner>
        </ion-col>
      </ion-row>

      <ion-row *ngIf="didntFoundCommunity">
        <ion-col>
          <ion-grid>
            <ion-row>
              <ion-col class="no-community-col">
                <ion-icon name="warning-outline" color="danger"></ion-icon>
                <p>Es existiert keine Community mit diesem Code</p>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-col>
      </ion-row>

      <ion-row *ngIf="foundCommunity">
        <ion-col>
          <ion-grid class="card">
            <ion-row>
              <ion-col>
                <h2 class="ion-text-center" style="margin: 0">{{foundCommunity.name}}</h2>
              </ion-col>
            </ion-row>

            <ion-row class="info-row">
              <ion-col>
                <div>
                  <h2>{{foundCommunity.admin.firstname}}</h2>
                  <p>Admin</p>
                </div>
              </ion-col>

              <ion-col>
                <div>
                  <h2>{{foundCommunity.memberCount}}</h2>
                  <p>Mitglieder</p>
                </div>

              </ion-col>
            </ion-row>

            <ion-row>
              <ion-col>
                <button type="button" style="width: 100%" class="btn-small btn-primary"
                  (click)="join()">Beitrittsanfrage
                  senden</button>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-col>
      </ion-row>

      <ion-row style="padding-top: 50px;">
        <ion-col>
          <button type="button" class="btn-small btn-outline-primary" (click)="gotoCreateCommunity()">Neue Community
            erstellen</button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>
</ion-content>
